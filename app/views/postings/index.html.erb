<!-- <% @postings.each_slice(3) do |ps| %>
  <div class="row">
    <% ps.each do |posting| %>
      <div class="card">
        <div class="card-body">
          <h4 class="card-title"><%= link_to posting.end, posting %></h4>
          <h6 class="mb-2 text-muted">From <%= posting.start %></h6>
          <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae.</p>
          <small class="author">Submitted <%= time_ago_in_words(posting.created_at) %> by <%= posting.user.username %></small>
        </div>
      </div>
    <% end %>
  </div>
<% end %> -->

<div class="row-fluid">
  <div class="col-md-6">
    <div id="map" style='width: 100%; height: 600px;'></div>
  </div>
  <div class="col-md-6">
    <% @postings.each_slice(2) do |ps| %>
      <div class="col-md-6">
        <% ps.each do |posting| %>
          <div class="card">
            <div class="card-body">
              <h4 class="card-title"><%= link_to posting.title, posting %></h4>
              <h6 class="mb-2 text-muted"><%= posting.address %></h6>
              <p class="card-text">$<%= posting.price %></p>
              <p class="card-text">Beds:<%= posting.num_beds %></p>
              <small class="author">Submitted <%= time_ago_in_words(posting.created_at) %> by <%= posting.user.username %></small>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ internal: { id: 'map' } }, function(){
    markers = handler.addMarkers(<%= raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();

    if (markers.length == 0) {
      handler.getMap().setZoom(2);
    } else if (markers.length == 1) {
      handler.getMap().setZoom(14);
    }
  });
</script>
